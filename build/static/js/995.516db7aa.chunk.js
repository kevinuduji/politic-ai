"use strict";(self.webpackChunkpolitic_ai=self.webpackChunkpolitic_ai||[]).push([[995],{995:(e,t,n)=>{var o=n(555),s=n(495);e=n.hmd(e);const i=n(617),r="\nYou are a skilled political commentator engaging in thoughtful debate. \nPresent well-reasoned arguments while maintaining a respectful tone. \nRespond naturally to what your opponent says, and make each response unique and authentic.  \nUse clear, everyday language that educated adults can easily understand. Avoid jargon, overly complex words, or academic terminology.\nUse analogies, compelling arguments, and references to make your points relatable and understandable to a general audience. \nFocus on simple but powerful words and phrases that convey your message effectively.\nEnsure each response relates to the previous speaker's points, creating a natural flow of conversation. \nAt the end of each dialogue, pose a question challenging the other side's validity.\n",a="\nDebate the following political issue: [TOPIC]. \nYou will be assigned a side, either for or against the issue.\n",p=[{roundNumber:1,title:"Round 1",subrounds:[{side:"A",type:"opening",description:"Side A Opening Statement"},{side:"B",type:"counter",description:"Side B Counter Response"},{side:"A",type:"counter",description:"Side A Counter Response"},{side:"B",type:"counter",description:"Side B Counter Response"},{side:"A",type:"counter",description:"Side A Counter Response"},{side:"B",type:"counter",description:"Side B Counter Response"},{side:"A",type:"counter",description:"Side A Counter Response"},{side:"B",type:"counter",description:"Side B Counter Response"},{side:"A",type:"closing",description:"Side A Round 1 Closing"},{side:"B",type:"closing",description:"Side B Round 1 Closing"}]},{roundNumber:2,title:"Round 2",subrounds:[{side:"A",type:"opening",description:"Side A Opening Statement"},{side:"B",type:"counter",description:"Side B Counter Response"},{side:"A",type:"counter",description:"Side A Counter Response"},{side:"B",type:"counter",description:"Side B Counter Response"},{side:"A",type:"counter",description:"Side A Counter Response"},{side:"B",type:"counter",description:"Side B Counter Response"},{side:"A",type:"counter",description:"Side A Counter Response"},{side:"B",type:"counter",description:"Side B Counter Response"},{side:"A",type:"closing",description:"Side A Round 2 Closing"},{side:"B",type:"closing",description:"Side B Round 2 Closing"}]},{roundNumber:3,title:"Round 3",subrounds:[{side:"A",type:"opening",description:"Side A Opening Statement"},{side:"B",type:"counter",description:"Side B Counter Response"},{side:"A",type:"counter",description:"Side A Counter Response"},{side:"B",type:"counter",description:"Side B Counter Response"},{side:"A",type:"counter",description:"Side A Counter Response"},{side:"B",type:"counter",description:"Side B Counter Response"},{side:"A",type:"counter",description:"Side A Counter Response"},{side:"B",type:"counter",description:"Side B Counter Response"},{side:"A",type:"closing",description:"Side A Final Closing"},{side:"B",type:"closing",description:"Side B Final Closing"}]}];class c{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.debateHistory=[],this.apiConfig=(0,o.A)({apiKey:e.apiKey||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CEREBRAS_API_KEY:"csk-38fjw38j8h8ct8yk4y242crcntx88w64xvncwxrpc3c8vn2f"}.CEREBRAS_API_KEY,model:e.model||"qwen-3-235b-a22b-instruct-2507",maxTokens:e.maxTokens||300,temperature:e.temperature||.6,topP:e.topP||.8,stream:void 0===e.stream||e.stream},e),this.cerebras=new i({apiKey:this.apiConfig.apiKey})}async callLLM(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.apiConfig.apiKey)return console.warn("No Cerebras API key provided, using fallback response"),this.generateFallbackResponse(t);try{return await this.callCerebrasAPI(e,t)}catch(n){return console.error("Cerebras API Error:",n.message),n.message.includes("Rate limit")?console.error("Consider implementing retry logic or reducing request frequency"):n.message.includes("API key")&&console.error("Set your CEREBRAS_API_KEY environment variable"),this.generateFallbackResponse(t)}}async callCerebrasAPI(e){const t=[{role:"system",content:r},{role:"user",content:e}];try{if(this.apiConfig.stream){const e=await this.cerebras.chat.completions.create({messages:t,model:this.apiConfig.model,stream:!0,max_completion_tokens:this.apiConfig.maxTokens,temperature:this.apiConfig.temperature,top_p:this.apiConfig.topP});let r="";var n,o=!1,i=!1;try{for(var a,p=(0,s.A)(e);o=!(a=await p.next()).done;o=!1){const e=a.value;var c,d;r+=(null===(c=e.choices[0])||void 0===c||null===(d=c.delta)||void 0===d?void 0:d.content)||""}}catch(g){i=!0,n=g}finally{try{o&&null!=p.return&&await p.return()}finally{if(i)throw n}}return r}var u,l;return(null===(u=(await this.cerebras.chat.completions.create({messages:t,model:this.apiConfig.model,stream:!1,max_completion_tokens:this.apiConfig.maxTokens,temperature:this.apiConfig.temperature,top_p:this.apiConfig.topP})).choices[0])||void 0===u||null===(l=u.message)||void 0===l?void 0:l.content)||""}catch(m){throw 429===m.status?new Error("Rate limit exceeded. Please try again later."):401===m.status||403===m.status?new Error("Invalid API key or insufficient permissions."):400===m.status?new Error("Invalid request: ".concat(m.message)):new Error("Cerebras API request failed: ".concat(m.message))}}generateFallbackResponse(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{stance:t="support",topic:n="this issue"}=e;return"I ".concat(t," this position on ").concat(n,". This is an important issue that needs careful thought and respectful discussion between all people involved.")}async generateDialogue(e){let{topic:t,side:n,subroundType:o,previousArguments:s=[],sideAName:i="Supporting",sideBName:r="Opposing"}=e;const a="A"===n,p=a?i:r,c=a?r:i,d=a?"support":"oppose",u=a?"in favor of":"against",l=this.getLastOpponentArgument(s,n),g=this.buildPromptContext({topic:t,stance:d,position:u,speakerName:p,opponentName:c,subroundType:o,lastOpponentArgument:l,previousArguments:s,sideAName:i,sideBName:r});return await this.callLLM(g.prompt,g)}buildPromptContext(e){let{topic:t,stance:n,position:o,speakerName:s,opponentName:i,subroundType:r,lastOpponentArgument:p,previousArguments:c,sideAName:d,sideBName:u}=e,l="";if(c.length>0){const e=c.slice(-2);l="\n\nRecent discussion:\n",e.forEach(e=>{const t="A"===e.side?d:u;l+="".concat(t,": ").concat(e.content.substring(0,150),"...\n")})}let g="";p&&(g="\n\nResponding to ".concat(n,' the topic: "').concat(p.substring(0,200),'..."'));const m=this.getTaskInstructions(r);return{prompt:"".concat(a.replace("[TOPIC]",t),"\n\nYou are ").concat(n," the position on ").concat(t,". You are ").concat(o," this issue.\n\nContext: ").concat(m,"\n\n").concat(l).concat(g,"\n\nGenerate a thoughtful, well-reasoned response that:\n1. Stays true to your assigned position (").concat(n,")\n2. Addresses the specific task for this subround type\n3. Responds appropriately to previous arguments\n4. Maintains a respectful but firm debate tone\n5. Uses clear, accessible language that avoids complex jargon or overly academic terms\n6. Includes specific examples or analogies when helpful\n7. Ends with a challenging question for your opponent (except in final closing statements)\n8. Is concise and under 150 words\n9. Speaks in a way that educated adults can easily follow and understand\n\nYour response:"),topic:t,stance:n,speakerName:s,opponentName:i,subroundType:r}}getTaskInstructions(e){switch(e){case"opening":return"This is your opening statement in the debate. Present your main arguments and set the foundation for your position.";case"counter":return"Respond to your opponent's perspective. Challenge their arguments, present evidence that contradicts their position, or offer alternative viewpoints.";case"closing":return"This is a concluding moment in the debate. Summarize your key points and make your final appeal.";default:return"Continue the debate naturally"}}getLastOpponentArgument(e,t){for(let n=e.length-1;n>=0;n--){const o=e[n];if(o.side!==t)return o.content}return null}static createEmptyDebate(){let{topic:e,roundTopic1:t,roundTopic2:n,roundTopic3:o,sideAName:s="Supporting",sideBName:i="Opposing"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=p.map((r,a)=>{const p=[t,n,o],c=p[a]&&p[a].trim()?p[a]:"".concat(e," - ").concat(r.title),d=p[a]&&p[a].trim()?p[a]:r.title;return{roundNumber:r.roundNumber,title:d,topic:c,subrounds:r.subrounds.map((e,t)=>({subroundNumber:t+1,type:e.type,description:e.description,assignedSide:e.side,sides:{A:{speakerLabel:s,position:"".concat(s," (FOR)"),text:"",audioUrl:null,isAssigned:"A"===e.side},B:{speakerLabel:i,position:"".concat(i," (AGAINST)"),text:"",audioUrl:null,isAssigned:"B"===e.side}}}))}});return{debateId:"debate_".concat(Date.now()),topic:e,roundTopic1:t,roundTopic2:n,roundTopic3:o,sideAName:s,sideBName:i,rounds:r}}}e.exports={DialogueGenerator:c,DEBATE_STRUCTURE:p,SYSTEM_PROMPT:r,USER_PROMPT_TEMPLATE:a},e.exports&&(e.exports.default=c)}}]);
//# sourceMappingURL=995.516db7aa.chunk.js.map